{"ast":null,"code":"import _defineProperty from \"/Users/cvoisin/Repos/actandcaredev/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"/Users/cvoisin/Repos/actandcaredev/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/cvoisin/Repos/actandcaredev/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/cvoisin/Repos/actandcaredev/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/cvoisin/Repos/actandcaredev/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/cvoisin/Repos/actandcaredev/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/Users/cvoisin/Repos/actandcaredev/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/Users/cvoisin/Repos/actandcaredev/src/Components/Signup/Signup.js\";\nimport React from 'react';\nimport './Signin.css';\nimport listespecialite from '../../Jasons/listespecialite.json';\nimport listeregions1 from '../../Jasons/regions.json';\nimport * as firebase from 'firebase';\n\nvar Signup =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(Signup, _React$Component);\n\n  function Signup(props) {\n    var _this;\n\n    _classCallCheck(this, Signup);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Signup).call(this, props));\n    _this.state = {\n      filteredVilles: [{\n        \"nom\": \"Choisir une ville\",\n        \"region\": {\n          \"nom\": \"\"\n        }\n      }],\n      filteredRegions: listeregions1\n    };\n    _this.handleChange = _this.handleChange.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.handleSubmit = _this.handleSubmit.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.handleChangeRegion = _this.handleChangeRegion.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.handleChangeVille = _this.handleChangeVille.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.handleVilleSelection = _this.handleVilleSelection.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  } /////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n  //Ville & région\n\n\n  _createClass(Signup, [{\n    key: \"displayVilles\",\n    value: function displayVilles() {\n      return this.state.filteredVilles.map(function (ville) {\n        return React.createElement(\"option\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 25\n          },\n          __self: this\n        }, ville.nom);\n      });\n    }\n  }, {\n    key: \"displayRegions\",\n    value: function displayRegions() {\n      return this.state.filteredRegions.map(function (region) {\n        return React.createElement(\"option\", {\n          code: region.code,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 30\n          },\n          __self: this\n        }, region.nom);\n      });\n    }\n  }, {\n    key: \"handleChangeRegion\",\n    value: function handleChangeRegion(event) {\n      var _this2 = this;\n\n      var index = event.target.selectedIndex;\n      var optionElement = event.target.childNodes[index];\n      var region_code = optionElement.getAttribute('code');\n      this.setState({\n        region_code: region_code,\n        region_selected: event.target.value\n      }, function () {\n        _this2.loadCities();\n      });\n    }\n  }, {\n    key: \"handleChangeVille\",\n    value: function handleChangeVille(event) {\n      var _this3 = this;\n\n      //if(event.target.value=\"\")this.setState({   filteredVilles: [{ \"nom\": \"Choisir une ville\", \"region\":{\"nom\":\"\"}}],})\n      this.setState({\n        ville_nom: event.target.value\n      }, function () {\n        _this3.loadCities_2(event);\n      });\n    }\n  }, {\n    key: \"handleVilleSelection\",\n    value: function handleVilleSelection(event) {\n      this.setState({\n        region_selected: [this.state.filteredVilles[event.target.selectedIndex].region.nom],\n        ville_selected: event.target.value\n      });\n    }\n  }, {\n    key: \"loadCities\",\n    value: function loadCities() {\n      var _this4 = this;\n\n      fetch(\"https://geo.api.gouv.fr/communes?codeRegion=\".concat(this.state.region_code, \"&fields=nom,codeRegion,region&format=json\")).then(function (result) {\n        return result.json();\n      }).then(function (regionVilles) {\n        return _this4.setState({\n          regionVilles: regionVilles,\n          filteredVilles: regionVilles\n        });\n      });\n    }\n  }, {\n    key: \"loadCities_2\",\n    value: function loadCities_2(event) {\n      var _this5 = this;\n\n      fetch(\"https://geo.api.gouv.fr/communes?nom=\".concat(this.state.ville_nom, \"&fields=nom,region&format=json\")).then(function (result) {\n        return result.json();\n      }).then(function (villeVilles) {\n        var region_selected;\n        var ville_selected;\n        console.log(villeVilles);\n\n        if (villeVilles[0] !== undefined) {\n          region_selected = villeVilles[0].region.nom;\n          ville_selected = villeVilles[0].nom;\n        } else {\n          region_selected = \"\";\n          ville_selected = \"\";\n        }\n\n        _this5.setState({\n          regionVilles: villeVilles,\n          filteredVilles: villeVilles,\n          region_selected: region_selected,\n          ville_selected: ville_selected\n        });\n      });\n    } // N'est pris en compte qu'avec la boucle choix région puis choix ville:\n\n  }, {\n    key: \"filterVilles\",\n    value: function filterVilles(event) {\n      var filteredVilles = this.state.regionVilles;\n      filteredVilles = filteredVilles.filter(function (city) {\n        return city[\"nom\"].toUpperCase().indexOf(event.target.value.toUpperCase()) !== -1;\n      }); //let  filteredRegions=[{ \"nom\": \"....\", \"code\":\"\" }]\n\n      this.setState({\n        filteredVilles: filteredVilles\n      });\n    } ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n  }, {\n    key: \"handleChange\",\n    value: function handleChange(event) {\n      this.setState(_defineProperty({}, event.target.name, event.target.value));\n    }\n  }, {\n    key: \"handleSubmit\",\n    value: function handleSubmit(event) {\n      event.preventDefault();\n      var missionsetRef = firebase.database().ref('users/' + 1).set({\n        bdate: this.state.naissance,\n        rue: this.state.rue,\n        ville: this.state.ville_selected,\n        region: this.state.region_selected,\n        tel: this.state.tel,\n        specialite: this.state.specialite,\n        RPPS: this.state.RPPS\n      });\n    }\n  }, {\n    key: \"optionslistespecialite\",\n    value: function optionslistespecialite() {\n      return listespecialite.map(function (listespecialite) {\n        return React.createElement(\"option\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 114\n          },\n          __self: this\n        }, listespecialite);\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\"div\", {\n        id: \"wrapper\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 122\n        },\n        __self: this\n      }, React.createElement(\"form\", {\n        id: \"login\",\n        onSubmit: this.handleSubmit.bind(this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 123\n        },\n        __self: this\n      }, React.createElement(\"h2\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 124\n        },\n        __self: this\n      }, \"Compl\\xE9ter le profile:\"), React.createElement(\"div\", {\n        class: \"form-group\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 126\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        class: \"form-row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 127\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        class: \"col-md-6\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 128\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        for: \"naissance\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 129\n        },\n        __self: this\n      }, React.createElement(\"b\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 129\n        },\n        __self: this\n      }, \"Date de naissance\"))), React.createElement(\"div\", {\n        class: \"col-md-6\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 131\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        type: \"date\",\n        class: \"form-control\",\n        name: \"naissance\",\n        onChange: this.handleChange,\n        required: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 132\n        },\n        __self: this\n      })))), React.createElement(\"div\", {\n        class: \"form-group\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 137\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        class: \"form-row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 138\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        class: \"col-md-6\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 139\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        for: \"rue\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 140\n        },\n        __self: this\n      }, React.createElement(\"b\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 140\n        },\n        __self: this\n      }, \"Rue et num\\xE9ro\"))), React.createElement(\"div\", {\n        class: \"col-md-6\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 142\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        type: \"text\",\n        class: \"form-control\",\n        name: \"rue\",\n        placeholder: \"Ex: 37 Quai de Grenelle\",\n        onChange: this.handleChange,\n        required: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 143\n        },\n        __self: this\n      })))), React.createElement(\"div\", {\n        class: \"form-row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 148\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        class: \"form-group col-md-6\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 149\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 150\n        },\n        __self: this\n      }, React.createElement(\"b\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 150\n        },\n        __self: this\n      }, \"Ville\")), React.createElement(\"input\", {\n        type: \"text\",\n        class: \"form-control\",\n        name: \"ville\",\n        value: this.state.ville_nom,\n        onChange: this.handleChangeVille,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 151\n        },\n        __self: this\n      }), React.createElement(\"select\", {\n        required: true,\n        type: \"text\",\n        class: \"form-control\",\n        name: \"ville\",\n        value: this.state.ville_selected,\n        onChange: this.handleVilleSelection,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 152\n        },\n        __self: this\n      }, this.displayVilles())), React.createElement(\"div\", {\n        class: \"form-group col-md-6 \",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 156\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 157\n        },\n        __self: this\n      }, React.createElement(\"b\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 157\n        },\n        __self: this\n      }, \"R\\xE9gion\")), React.createElement(\"select\", {\n        required: true,\n        type: \"text\",\n        class: \"form-control\",\n        name: \"region\",\n        value: this.state.region_selected,\n        onChange: this.handleChangeRegion,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 158\n        },\n        __self: this\n      }, this.displayRegions()))), React.createElement(\"div\", {\n        class: \"form-group\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 164\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        class: \"form-row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 165\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        class: \"col-md-6\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 166\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        for: \"tel\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 167\n        },\n        __self: this\n      }, React.createElement(\"b\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 167\n        },\n        __self: this\n      }, \"Num\\xE9ro de t\\xE9l\\xE9phone portable\"))), React.createElement(\"div\", {\n        class: \"col-md-6\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 169\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        type: \"tel\",\n        class: \"form-control\",\n        name: \"tel\",\n        placeholder: \"Ex: 0645326789\",\n        onChange: this.handleChange,\n        required: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 170\n        },\n        __self: this\n      })))), React.createElement(\"div\", {\n        class: \"form-group\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 175\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        class: \"form-row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 176\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        class: \"col-md-6\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 177\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        for: \"specialite\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 178\n        },\n        __self: this\n      }, React.createElement(\"b\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 178\n        },\n        __self: this\n      }, \"Sp\\xE9cialit\\xE9\"))), React.createElement(\"div\", {\n        class: \"col-md-6\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 180\n        },\n        __self: this\n      }, React.createElement(\"select\", {\n        type: \"text\",\n        class: \"form-control\",\n        name: \"specialite\",\n        value: this.state.specialite,\n        onChange: this.handleChange,\n        required: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 181\n        },\n        __self: this\n      }, this.optionslistespecialite())))), React.createElement(\"div\", {\n        class: \"form-group\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 188\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        class: \"form-row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 189\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        class: \"col-md-6\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 190\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        for: \"RPPS\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 191\n        },\n        __self: this\n      }, React.createElement(\"b\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 191\n        },\n        __self: this\n      }, \"Num\\xE9ro RPPS\"))), React.createElement(\"div\", {\n        class: \"col-md-6\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 193\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        required: true,\n        type: \"number\",\n        class: \"form-control\",\n        name: \"RPPS\",\n        onChange: this.handleChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 194\n        },\n        __self: this\n      })))), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 198\n        },\n        __self: this\n      }), React.createElement(\"button\", {\n        type: \"submit\",\n        class: \"btn btn-md btn-block\",\n        id: \"addNewElement\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 199\n        },\n        __self: this\n      }, \"Valider\")));\n    }\n  }]);\n\n  return Signup;\n}(React.Component);\n\nexport { Signup as default };","map":{"version":3,"sources":["/Users/cvoisin/Repos/actandcaredev/src/Components/Signup/Signup.js"],"names":["React","listespecialite","listeregions1","firebase","Signup","props","state","filteredVilles","filteredRegions","handleChange","bind","handleSubmit","handleChangeRegion","handleChangeVille","handleVilleSelection","map","ville","nom","region","code","event","index","target","selectedIndex","optionElement","childNodes","region_code","getAttribute","setState","region_selected","value","loadCities","ville_nom","loadCities_2","ville_selected","fetch","then","result","json","regionVilles","villeVilles","console","log","undefined","filter","city","toUpperCase","indexOf","name","preventDefault","missionsetRef","database","ref","set","bdate","naissance","rue","tel","specialite","RPPS","displayVilles","displayRegions","optionslistespecialite","Component"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport './Signin.css'\r\nimport listespecialite from '../../Jasons/listespecialite.json'\r\nimport listeregions1 from '../../Jasons/regions.json'\r\nimport * as firebase from 'firebase';\r\n\r\nexport default class Signup extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state={\r\n      filteredVilles: [{ \"nom\": \"Choisir une ville\", \"region\": { \"nom\": \"\" } }],\r\n      filteredRegions: listeregions1\r\n    }\r\n    this.handleChange=this.handleChange.bind(this)\r\n    this.handleSubmit=this.handleSubmit.bind(this)\r\n    this.handleChangeRegion=this.handleChangeRegion.bind(this)\r\n    this.handleChangeVille=this.handleChangeVille.bind(this)\r\n    this.handleVilleSelection=this.handleVilleSelection.bind(this)\r\n\r\n  }\r\n  /////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\r\n  //Ville & région\r\n  displayVilles() {\r\n    return this.state.filteredVilles.map((ville) =>\r\n      <option>{ville.nom}</option>\r\n    )\r\n  }\r\n  displayRegions() {\r\n    return this.state.filteredRegions.map((region) =>\r\n      <option code={region.code}>{region.nom}</option>\r\n    )\r\n  }\r\n  handleChangeRegion(event) {\r\n    var index = event.target.selectedIndex;\r\n    var optionElement = event.target.childNodes[index]\r\n    var region_code = optionElement.getAttribute('code');\r\n\r\n    this.setState({ region_code, region_selected: event.target.value }, () => {\r\n      this.loadCities()\r\n    })\r\n  }\r\n  handleChangeVille(event) {\r\n    //if(event.target.value=\"\")this.setState({   filteredVilles: [{ \"nom\": \"Choisir une ville\", \"region\":{\"nom\":\"\"}}],})\r\n    this.setState({ ville_nom: event.target.value }, () => {\r\n      this.loadCities_2(event)\r\n    })\r\n  }\r\n  handleVilleSelection(event) {\r\n    this.setState({\r\n      region_selected: [this.state.filteredVilles[event.target.selectedIndex].region.nom],\r\n      ville_selected: event.target.value\r\n    })\r\n  }\r\n  loadCities() {\r\n    fetch(`https://geo.api.gouv.fr/communes?codeRegion=${this.state.region_code}&fields=nom,codeRegion,region&format=json`)\r\n      .then(result => result.json())\r\n      .then(regionVilles => this.setState({ regionVilles: regionVilles, filteredVilles: regionVilles }));\r\n  }\r\n  loadCities_2(event) {\r\n    fetch(`https://geo.api.gouv.fr/communes?nom=${this.state.ville_nom}&fields=nom,region&format=json`)\r\n      .then(result => result.json())\r\n      .then(villeVilles => {\r\n        let region_selected\r\n        let ville_selected\r\n        console.log(villeVilles)\r\n        if (villeVilles[0] !== undefined) {\r\n          region_selected = villeVilles[0].region.nom\r\n          ville_selected = villeVilles[0].nom\r\n        }\r\n        else{\r\n          region_selected=\"\"\r\n          ville_selected =\"\"\r\n        }\r\n\r\n        this.setState({ regionVilles: villeVilles, filteredVilles: villeVilles, region_selected, ville_selected })\r\n      });\r\n  }\r\n\r\n  // N'est pris en compte qu'avec la boucle choix région puis choix ville:\r\n  filterVilles(event) {\r\n    let filteredVilles = this.state.regionVilles;\r\n    filteredVilles = filteredVilles.filter(\r\n      (city) => {\r\n        return city[\"nom\"].toUpperCase().indexOf(event.target.value.toUpperCase()) !== -1;\r\n      }\r\n    );\r\n    //let  filteredRegions=[{ \"nom\": \"....\", \"code\":\"\" }]\r\n    this.setState({ filteredVilles })\r\n  }\r\n  ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\r\n\r\n\r\n  handleChange(event){\r\n    this.setState({[event.target.name]: event.target.value});\r\n  }\r\n  handleSubmit(event) {\r\n    event.preventDefault();\r\n    const missionsetRef = firebase.database().ref('users/' + 1).set(\r\n    {\r\n      bdate:this.state.naissance,\r\n      rue:this.state.rue,\r\n      ville:this.state.ville_selected,\r\n      region:this.state.region_selected,\r\n      tel:this.state.tel,\r\n      specialite:this.state.specialite,\r\n      RPPS:this.state.RPPS\r\n    });\r\n\r\n  }\r\n\r\n\r\n  optionslistespecialite() { return listespecialite.map(listespecialite => {\r\n    return (\r\n      <option >{listespecialite}</option>\r\n    )\r\n  })}\r\n\r\n\r\n  render() {\r\n    return (\r\n\r\n      <div id=\"wrapper\">\r\n        <form id=\"login\" onSubmit={this.handleSubmit.bind(this)}>\r\n          <h2>Compléter le profile:</h2>\r\n\r\n          <div class=\"form-group\">\r\n            <div class=\"form-row\">\r\n              <div class=\"col-md-6\">\r\n                <label for=\"naissance\"><b>Date de naissance</b></label>\r\n              </div>\r\n              <div class=\"col-md-6\">\r\n                <input type=\"date\" class=\"form-control\" name=\"naissance\" onChange={this.handleChange} required></input>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <div class=\"form-group\">\r\n            <div class=\"form-row\">\r\n              <div class=\"col-md-6\">\r\n                <label for=\"rue\"><b>Rue et numéro</b></label>\r\n              </div>\r\n              <div class=\"col-md-6\">\r\n              <input type=\"text\" class=\"form-control\" name=\"rue\" placeholder=\"Ex: 37 Quai de Grenelle\" onChange={this.handleChange} required></input>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <div class=\"form-row\">\r\n              <div class=\"form-group col-md-6\">\r\n                <label><b>Ville</b></label>\r\n                <input type=\"text\" class=\"form-control\" name=\"ville\" value={this.state.ville_nom} onChange={this.handleChangeVille}></input>\r\n                <select required type=\"text\" class=\"form-control\" name=\"ville\" value={this.state.ville_selected} onChange={this.handleVilleSelection}>\r\n                  {this.displayVilles()}\r\n                </select>\r\n              </div>\r\n              <div class=\"form-group col-md-6 \">\r\n                <label><b>Région</b></label>\r\n                <select required type=\"text\" class=\"form-control\" name=\"region\" value={this.state.region_selected} onChange={this.handleChangeRegion}  >\r\n                  {this.displayRegions()}\r\n                </select>\r\n              </div>\r\n            </div>\r\n\r\n          <div class=\"form-group\">\r\n            <div class=\"form-row\">\r\n              <div class=\"col-md-6\">\r\n                <label for=\"tel\"><b>Numéro de téléphone portable</b></label>\r\n              </div>\r\n              <div class=\"col-md-6\">\r\n              <input type=\"tel\" class=\"form-control\" name=\"tel\" placeholder=\"Ex: 0645326789\" onChange={this.handleChange} required></input>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <div class=\"form-group\">\r\n            <div class=\"form-row\">\r\n              <div class=\"col-md-6\">\r\n                <label for=\"specialite\"><b>Spécialité</b></label>\r\n              </div>\r\n              <div class=\"col-md-6\">\r\n              <select type=\"text\" class=\"form-control\" name=\"specialite\" value={this.state.specialite} onChange={this.handleChange} required>\r\n                {this.optionslistespecialite()}\r\n              </select>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <div class=\"form-group\">\r\n            <div class=\"form-row\">\r\n              <div class=\"col-md-6\">\r\n                <label for=\"RPPS\"><b>Numéro RPPS</b></label>\r\n              </div>\r\n              <div class=\"col-md-6\">\r\n              <input required type=\"number\" class=\"form-control\" name=\"RPPS\" onChange={this.handleChange}></input>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <br></br>\r\n          <button type=\"submit\" class=\"btn btn-md btn-block\" id=\"addNewElement\">Valider</button>\r\n        </form>\r\n      </div>\r\n\r\n    );\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}