{"ast":null,"code":"import _classCallCheck from \"C:\\\\Users\\\\Arthur\\\\Documents\\\\GitHub\\\\actandcaredev\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\Arthur\\\\Documents\\\\GitHub\\\\actandcaredev\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\Users\\\\Arthur\\\\Documents\\\\GitHub\\\\actandcaredev\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\Users\\\\Arthur\\\\Documents\\\\GitHub\\\\actandcaredev\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\Users\\\\Arthur\\\\Documents\\\\GitHub\\\\actandcaredev\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"C:\\\\Users\\\\Arthur\\\\Documents\\\\GitHub\\\\actandcaredev\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"C:\\\\Users\\\\Arthur\\\\Documents\\\\GitHub\\\\actandcaredev\\\\src\\\\Components\\\\MissionsSerie\\\\MissionsSerie.js\";\nimport React, { Component } from 'react';\nimport * as firebase from 'firebase';\nimport { DropdownToggle, UncontrolledDropdown } from 'reactstrap';\nimport Modal from 'react-responsive-modal';\nimport MissionPage from '../MissionPage/MissionPage.js';\nimport PdfFormDevis from '../PdfForm/PdfFormDevis.js';\nimport PdfFormODM from '../PdfForm/PdfFormODM.js';\nimport listestatut from '../../Jasons/listestatut.json';\n\nvar dateFormat = require('dateformat');\n\nvar MissionsSerie =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(MissionsSerie, _Component);\n\n  function MissionsSerie(props) {\n    var _this;\n\n    _classCallCheck(this, MissionsSerie);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(MissionsSerie).call(this, props));\n\n    _this.onOpenModal = function (nomission) {\n      _this.setState({\n        open: true,\n        selectednomission: nomission\n      });\n    };\n\n    _this.onCloseModal = function () {\n      _this.setState({\n        open: false,\n        selectednomission: \"\"\n      });\n    };\n\n    _this.onOpenModal2 = function () {\n      _this.setState({\n        open2: true\n      });\n    };\n\n    _this.onCloseModal2 = function () {\n      _this.setState({\n        open2: false\n      });\n    };\n\n    _this.onOpenModal3 = function () {\n      _this.setState({\n        open3: true\n      });\n    };\n\n    _this.onCloseModal3 = function () {\n      _this.setState({\n        open3: false\n      });\n    };\n\n    _this.state = {\n      open: false,\n      open2: false,\n      open3: false,\n      checkedmissions: [],\n      filteredmissions: [],\n      display: \"\",\n      datededebut: \"\",\n      datedefin: \"\",\n      listestatut: listestatut,\n      selectednomission: \"\"\n    };\n    _this.onSort = _this.onSort.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.checkselected = _this.checkselected.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.getMissions = _this.getMissions.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(MissionsSerie, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      this.timerID = setInterval(function () {\n        return _this2.tick();\n      }, 500);\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      clearInterval(this.timerID);\n    }\n  }, {\n    key: \"tick\",\n    value: function tick() {\n      this.getMissions();\n      this.updateDisplay();\n    }\n  }, {\n    key: \"getMissions\",\n    value: function getMissions() {\n      var _this3 = this;\n\n      var nomissionbase = this.props.nomission.substring(0, 11);\n      var filteredmissions = [];\n      var counter = 0;\n      var ref = firebase.database().ref('missions');\n      ref.on('value', function (snap) {\n        snap.forEach(function (child) {\n          if (child.val()['nomission'].includes(nomissionbase) && child.val()['nomission'].length === 13) {\n            filteredmissions.push(child.val());\n\n            if (counter === 0) {\n              _this3.setState({\n                datededebut: child.val()['datededebut'],\n                datedefin: child.val()['datedefin']\n              });\n            }\n\n            counter++;\n          }\n        });\n      });\n      ref.on('value', function (snap) {\n        snap.forEach(function (child) {\n          if (child.val()['nomission'].includes(nomissionbase) && child.val()['nomission'].length === 14) {\n            filteredmissions.push(child.val());\n          }\n        });\n      });\n      this.setState({\n        filteredmissions: filteredmissions\n      });\n    }\n  }, {\n    key: \"extraireDateFrancais\",\n    value: function extraireDateFrancais(date) {\n      var jour = dateFormat(date, \"dddd\").toString();\n      var mois = dateFormat(date, \"mmmm\").toString();\n      var numero = dateFormat(date, \"dd\").toString();\n      var annee = dateFormat(date, \"yyyy\").toString();\n      if (jour === \"Monday\") jour = \"Lundi\";\n      if (jour === \"Tuesday\") jour = \"Mardi\";\n      if (jour === \"Wednesday\") jour = \"Mercredi\";\n      if (jour === \"Thursday\") jour = \"Jeudi\";\n      if (jour === \"Friday\") jour = \"Vendredi\";\n      if (jour === \"Saturday\") jour = \"Samedi\";\n      if (jour === \"Sunday\") jour = \"Dimanche\";\n      if (mois === \"January\") mois = \"Janvier\";\n      if (mois === \"February\") mois = \"Février\";\n      if (mois === \"March\") mois = \"Mars\";\n      if (mois === \"April\") mois = \"Avril\";\n      if (mois === \"May\") mois = \"Mai\";\n      if (mois === \"June\") mois = \"Juin\";\n      if (mois === \"July\") mois = \"Juillet\";\n      if (mois === \"August\") mois = \"Aout\";\n      if (mois === \"September\") mois = \"Septembre\";\n      if (mois === \"October\") mois = \"Octobre\";\n      if (mois === \"November\") mois = \"Novembre\";\n      if (mois === \"December\") mois = \"Décembre\";\n      return jour + \" \" + numero + \" \" + mois + \" \" + annee;\n    }\n  }, {\n    key: \"handleChangeStatusTab\",\n    value: function handleChangeStatusTab(event) {\n      firebase.database().ref('missions/' + event.target.name).update({\n        statut: event.target.value\n      });\n    }\n  }, {\n    key: \"deuxiemebouton\",\n    value: function deuxiemebouton(nomission) {\n      var _this4 = this;\n\n      if (nomission.length > 12) {\n        return React.createElement(\"button\", {\n          name: nomission,\n          onClick: function onClick() {\n            return _this4.onOpenModal4(nomission);\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 171\n          },\n          __self: this\n        }, \"Afficher\");\n      } else {\n        return React.createElement(\"button\", {\n          name: nomission,\n          onClick: function onClick() {\n            return _this4.onOpenModal(nomission);\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 173\n          },\n          __self: this\n        }, \"\\u270F Modifier\");\n      }\n    }\n  }, {\n    key: \"boutonsupprimer\",\n    value: function boutonsupprimer(nomission) {\n      var _this5 = this;\n\n      if (nomission.length === 13 && nomission.charAt(12) === '1') {\n        return \"\";\n      } else {\n        return React.createElement(\"button\", {\n          onClick: function onClick() {\n            return _this5.deleteMission(nomission);\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 181\n          },\n          __self: this\n        }, \"Supprimer\");\n      }\n    }\n  }, {\n    key: \"updateDisplay\",\n    value: function updateDisplay() {\n      var _this6 = this;\n\n      var listItem = this.state.filteredmissions.map(function (mission, index) {\n        return React.createElement(\"tr\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 188\n          },\n          __self: this\n        }, React.createElement(\"th\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 189\n          },\n          __self: this\n        }, React.createElement(\"input\", {\n          type: \"checkbox\",\n          name: mission.nomission,\n          value: \"checked\",\n          onChange: _this6.checkselected,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 190\n          },\n          __self: this\n        })), React.createElement(\"th\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 192\n          },\n          __self: this\n        }, React.createElement(\"button\", {\n          name: mission.nomission,\n          onClick: function onClick() {\n            return _this6.onOpenModal(mission.nomission);\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 193\n          },\n          __self: this\n        }, \"\\u270F Modifier\")), React.createElement(\"th\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 195\n          },\n          __self: this\n        }, _this6.options_mission_listestatut_color(mission)), React.createElement(\"th\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 198\n          },\n          __self: this\n        }, mission.specialite), React.createElement(\"th\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 199\n          },\n          __self: this\n        }, _this6.extraireDateFrancais(mission.datededebut)), React.createElement(\"th\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 200\n          },\n          __self: this\n        }, mission.ville), React.createElement(\"th\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 201\n          },\n          __self: this\n        }, mission.type), React.createElement(\"th\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 202\n          },\n          __self: this\n        }, mission.typedetablissement), React.createElement(\"th\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 203\n          },\n          __self: this\n        }, mission.remuneration), React.createElement(\"th\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 204\n          },\n          __self: this\n        }, _this6.boutonsupprimer(mission.nomission)));\n      });\n      this.setState({\n        display: React.createElement(\"div\", {\n          class: \"table-responsive\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 210\n          },\n          __self: this\n        }, React.createElement(\"table\", {\n          class: \"table table-striped\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 210\n          },\n          __self: this\n        }, React.createElement(\"tr\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 211\n          },\n          __self: this\n        }, React.createElement(\"th\", {\n          scope: \"col\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 212\n          },\n          __self: this\n        }), React.createElement(\"th\", {\n          scope: \"col\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 213\n          },\n          __self: this\n        }), React.createElement(\"th\", {\n          scope: \"col\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 214\n          },\n          __self: this\n        }, React.createElement(UncontrolledDropdown, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 214\n          },\n          __self: this\n        }, React.createElement(DropdownToggle, {\n          onClick: function onClick(e) {\n            return _this6.onSort(e, 'statut');\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 214\n          },\n          __self: this\n        }, \" Statut actuel de la mission \"))), React.createElement(\"th\", {\n          scope: \"col\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 215\n          },\n          __self: this\n        }, React.createElement(UncontrolledDropdown, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 215\n          },\n          __self: this\n        }, React.createElement(DropdownToggle, {\n          onClick: function onClick(e) {\n            return _this6.onSort(e, 'specialite');\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 215\n          },\n          __self: this\n        }, \" Sp\\xE9cialit\\xE9 \"))), React.createElement(\"th\", {\n          scope: \"col\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 216\n          },\n          __self: this\n        }, React.createElement(UncontrolledDropdown, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 216\n          },\n          __self: this\n        }, React.createElement(DropdownToggle, {\n          onClick: function onClick(e) {\n            return _this6.onSort(e, 'datedefin');\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 216\n          },\n          __self: this\n        }, \" Date \"))), React.createElement(\"th\", {\n          scope: \"col\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 217\n          },\n          __self: this\n        }, React.createElement(UncontrolledDropdown, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 217\n          },\n          __self: this\n        }, React.createElement(DropdownToggle, {\n          onClick: function onClick(e) {\n            return _this6.onSort(e, 'ville');\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 217\n          },\n          __self: this\n        }, \" Ville \"))), React.createElement(\"th\", {\n          scope: \"col\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 218\n          },\n          __self: this\n        }, React.createElement(UncontrolledDropdown, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 218\n          },\n          __self: this\n        }, React.createElement(DropdownToggle, {\n          onClick: function onClick(e) {\n            return _this6.onSort(e, 'type');\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 218\n          },\n          __self: this\n        }, \" Type de mission \"))), React.createElement(\"th\", {\n          scope: \"col\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 219\n          },\n          __self: this\n        }, React.createElement(UncontrolledDropdown, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 219\n          },\n          __self: this\n        }, React.createElement(DropdownToggle, {\n          onClick: function onClick(e) {\n            return _this6.onSort(e, 'typedetablissement');\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 219\n          },\n          __self: this\n        }, \" Type d'E.S. \"))), React.createElement(\"th\", {\n          scope: \"col\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 220\n          },\n          __self: this\n        }, React.createElement(UncontrolledDropdown, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 220\n          },\n          __self: this\n        }, React.createElement(DropdownToggle, {\n          onClick: function onClick(e) {\n            return _this6.onSort(e, 'remuneration');\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 220\n          },\n          __self: this\n        }, \" R\\xE9mun\\xE9ration \"))), React.createElement(\"th\", {\n          scope: \"col\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 221\n          },\n          __self: this\n        })), listItem))\n      });\n    }\n  }, {\n    key: \"optionslistestatut\",\n    value: function optionslistestatut() {\n      return this.state.listestatut.map(function (listestatut) {\n        if (listestatut === \"Recherche en cours\") {\n          return React.createElement(\"option\", {\n            class: \"alert-danger\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 231\n            },\n            __self: this\n          }, listestatut);\n        } else if (listestatut === \"Pourvu\") {\n          return React.createElement(\"option\", {\n            class: \"alert-success\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 235\n            },\n            __self: this\n          }, listestatut);\n        } else {\n          return React.createElement(\"option\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 240\n            },\n            __self: this\n          }, listestatut);\n        }\n      });\n    }\n  }, {\n    key: \"optionslistestatut_color\",\n    value: function optionslistestatut_color() {\n      var optionslistestatut = this.optionslistestatut();\n      if (this.state.statut === \"Recherche en cours\") return React.createElement(\"select\", {\n        type: \"text\",\n        class: \"form-control alert-danger\",\n        name: \"statut\",\n        value: this.state.statut,\n        onChange: this.handleChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 247\n        },\n        __self: this\n      }, optionslistestatut);else if (this.state.statut === \"Pourvu\") return React.createElement(\"select\", {\n        type: \"text\",\n        class: \"form-control alert-success\",\n        name: \"statut\",\n        value: this.state.statut,\n        onChange: this.handleChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 250\n        },\n        __self: this\n      }, optionslistestatut);else return React.createElement(\"select\", {\n        type: \"text\",\n        class: \"form-control\",\n        name: \"statut\",\n        value: this.state.statut,\n        onChange: this.handleChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 253\n        },\n        __self: this\n      }, optionslistestatut);\n    }\n  }, {\n    key: \"options_mission_listestatut_color\",\n    value: function options_mission_listestatut_color(mission) {\n      if (mission.statut === \"Recherche en cours\") return React.createElement(\"select\", {\n        type: \"text\",\n        class: \"form-control alert-danger\",\n        name: mission.nomission,\n        value: mission.statut,\n        onChange: this.handleChangeStatusTab,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 260\n        },\n        __self: this\n      }, this.optionslistestatut());else if (mission.statut === \"Pourvu\") return React.createElement(\"select\", {\n        type: \"text\",\n        class: \"form-control alert-success\",\n        name: mission.nomission,\n        value: mission.statut,\n        onChange: this.handleChangeStatusTab,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 263\n        },\n        __self: this\n      }, this.optionslistestatut());else return React.createElement(\"select\", {\n        type: \"text\",\n        class: \"form-control\",\n        name: mission.nomission,\n        value: mission.statut,\n        onChange: this.handleChangeStatusTab,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 266\n        },\n        __self: this\n      }, this.optionslistestatut());\n    }\n  }, {\n    key: \"onSort\",\n    value: function onSort(event, sortKey) {\n      var sortkeys = this.state.sortkeys;\n      sortkeys.push(sortKey);\n      this.setState({\n        sortkeys: sortkeys\n      });\n    }\n  }, {\n    key: \"checkselected\",\n    value: function checkselected(event) {\n      var tmpcheckedmissions = this.state.checkedmissions;\n      var errorcount = 0;\n\n      for (var i = 0; i < tmpcheckedmissions.length; i++) {\n        if (event.target.name === tmpcheckedmissions[i]) {\n          tmpcheckedmissions[i] = \"\";\n          errorcount++;\n        }\n      }\n\n      if (errorcount === 0) tmpcheckedmissions.push(event.target.name);\n      this.setState({\n        checkedmissions: tmpcheckedmissions\n      });\n    }\n  }, {\n    key: \"deleteMission\",\n    value: function deleteMission(todeletenomission) {\n      firebase.database().ref('missions/' + todeletenomission).remove();\n    }\n  }, {\n    key: \"dateformatreduit\",\n    value: function dateformatreduit(date) {\n      var mois = dateFormat(date, \"mm\").toString();\n      var numero = dateFormat(date, \"dd\").toString();\n      var annee = dateFormat(date, \"yyyy\").toString();\n      if (numero < 10) numero = \"0\" + numero;\n      return numero + \"/\" + mois + \"/\" + annee;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var open = this.state.open;\n      var open2 = this.state.open2;\n      var open3 = this.state.open3;\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 323\n        },\n        __self: this\n      }, React.createElement(Modal, {\n        open: open,\n        onClose: this.onCloseModal,\n        center: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 324\n        },\n        __self: this\n      }, React.createElement(MissionPage, {\n        nomission: this.state.selectednomission,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 325\n        },\n        __self: this\n      })), React.createElement(Modal, {\n        open: open2,\n        onClose: this.onCloseModal2,\n        center: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 327\n        },\n        __self: this\n      }, React.createElement(PdfFormDevis, {\n        checkedmissions: this.state.checkedmissions,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 328\n        },\n        __self: this\n      })), React.createElement(Modal, {\n        open: open3,\n        onClose: this.onCloseModal3,\n        center: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 330\n        },\n        __self: this\n      }, React.createElement(PdfFormODM, {\n        checkedmissions: this.state.checkedmissions,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 331\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        style: {\n          textAlign: 'center',\n          width: '800px'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 333\n        },\n        __self: this\n      }, React.createElement(\"h1\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 334\n        },\n        __self: this\n      }, \"Mission du \", this.dateformatreduit(this.state.datededebut), \" au \", this.dateformatreduit(this.state.datedefin))), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 336\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        onClick: this.onOpenModal2,\n        class: \"btn btn-md btn-block\",\n        id: \"addNewElement\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 337\n        },\n        __self: this\n      }, \"G\\xE9n\\xE9rer un devis\"), React.createElement(\"button\", {\n        onClick: this.onOpenModal3,\n        class: \"btn btn-md btn-block\",\n        id: \"addNewElement\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 338\n        },\n        __self: this\n      }, \"G\\xE9n\\xE9rer un ODM\")), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 340\n        },\n        __self: this\n      }, this.state.display));\n    }\n  }]);\n\n  return MissionsSerie;\n}(Component);\n\nexport { MissionsSerie as default };","map":{"version":3,"sources":["C:\\Users\\Arthur\\Documents\\GitHub\\actandcaredev\\src\\Components\\MissionsSerie\\MissionsSerie.js"],"names":["React","Component","firebase","DropdownToggle","UncontrolledDropdown","Modal","MissionPage","PdfFormDevis","PdfFormODM","listestatut","dateFormat","require","MissionsSerie","props","onOpenModal","nomission","setState","open","selectednomission","onCloseModal","onOpenModal2","open2","onCloseModal2","onOpenModal3","open3","onCloseModal3","state","checkedmissions","filteredmissions","display","datededebut","datedefin","onSort","bind","checkselected","getMissions","timerID","setInterval","tick","clearInterval","updateDisplay","nomissionbase","substring","counter","ref","database","on","snap","forEach","child","val","includes","length","push","date","jour","toString","mois","numero","annee","event","target","name","update","statut","value","onOpenModal4","charAt","deleteMission","listItem","map","mission","index","options_mission_listestatut_color","specialite","extraireDateFrancais","ville","type","typedetablissement","remuneration","boutonsupprimer","e","optionslistestatut","handleChange","handleChangeStatusTab","sortKey","sortkeys","tmpcheckedmissions","errorcount","i","todeletenomission","remove","textAlign","width","dateformatreduit"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport * as firebase from 'firebase';\r\nimport { DropdownToggle,  UncontrolledDropdown,} from 'reactstrap';\r\nimport Modal from 'react-responsive-modal';\r\nimport MissionPage from '../MissionPage/MissionPage.js'\r\nimport PdfFormDevis from '../PdfForm/PdfFormDevis.js'\r\nimport PdfFormODM from '../PdfForm/PdfFormODM.js'\r\n\r\nimport listestatut from '../../Jasons/listestatut.json'\r\nvar dateFormat = require('dateformat');\r\n\r\n\r\nexport default class MissionsSerie extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      open: false,\r\n      open2: false,\r\n      open3: false,\r\n      checkedmissions: [],\r\n      filteredmissions: [],\r\n      display: \"\",\r\n      datededebut: \"\",\r\n      datedefin: \"\",\r\n      listestatut: listestatut,\r\n      selectednomission: \"\"\r\n\r\n    };\r\n\r\n    this.onSort = this.onSort.bind(this)\r\n    this.checkselected = this.checkselected.bind(this)\r\n    this.getMissions = this.getMissions.bind(this)\r\n\r\n  }\r\n\r\n  onOpenModal = (nomission) => {\r\n    this.setState({open: true, selectednomission: nomission });\r\n  };\r\n\r\n  onCloseModal = () => {\r\n    this.setState({ open: false, selectednomission: \"\"  });\r\n  };\r\n\r\n  onOpenModal2 = () => {\r\n    this.setState({open2: true});\r\n  };\r\n\r\n  onCloseModal2 = () => {\r\n    this.setState({ open2: false });\r\n  };\r\n\r\n  onOpenModal3 = () => {\r\n    this.setState({open3: true});\r\n  };\r\n\r\n  onCloseModal3 = () => {\r\n    this.setState({ open3: false });\r\n  };\r\n\r\n  componentDidMount() {\r\n    this.timerID = setInterval(\r\n      () => this.tick(),\r\n      500\r\n    );\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    clearInterval(this.timerID);\r\n  }\r\n\r\n  tick() {\r\n\r\n    this.getMissions();\r\n    this.updateDisplay();\r\n  }\r\n\r\n  getMissions(){\r\n\r\n    let nomissionbase = this.props.nomission.substring(0,11);\r\n\r\n    let filteredmissions = [];\r\n    let counter = 0;\r\n    const ref = firebase.database().ref('missions');\r\n    ref.on('value', snap => {\r\n      snap.forEach(child => {\r\n\r\n          if (child.val()['nomission'].includes(nomissionbase) && child.val()['nomission'].length === 13)\r\n          {\r\n            filteredmissions.push(child.val());\r\n\r\n            if (counter === 0)\r\n              {\r\n                this.setState( { datededebut: child.val()['datededebut'], datedefin: child.val()['datedefin']})\r\n              }\r\n\r\n            counter++;\r\n          }\r\n      })\r\n    });\r\n\r\n    ref.on('value', snap => {\r\n      snap.forEach(child => {\r\n\r\n          if (child.val()['nomission'].includes(nomissionbase) && child.val()['nomission'].length === 14)\r\n          {\r\n            filteredmissions.push(child.val());\r\n          }\r\n      })\r\n    });\r\n\r\n    this.setState({ filteredmissions: filteredmissions})\r\n  }\r\n\r\n  extraireDateFrancais(date) {\r\n\r\n    let jour = dateFormat(date, \"dddd\").toString();\r\n    let mois = dateFormat(date, \"mmmm\").toString();\r\n    let numero = dateFormat(date, \"dd\").toString();\r\n    let annee = dateFormat(date, \"yyyy\").toString();\r\n\r\n    if (jour === \"Monday\")\r\n      jour = \"Lundi\";\r\n    if (jour === \"Tuesday\")\r\n      jour = \"Mardi\";\r\n    if (jour === \"Wednesday\")\r\n      jour = \"Mercredi\";\r\n    if (jour === \"Thursday\")\r\n      jour = \"Jeudi\";\r\n    if (jour === \"Friday\")\r\n      jour = \"Vendredi\";\r\n    if (jour === \"Saturday\")\r\n      jour = \"Samedi\";\r\n    if (jour === \"Sunday\")\r\n      jour = \"Dimanche\";\r\n\r\n    if (mois === \"January\")\r\n      mois = \"Janvier\";\r\n    if (mois === \"February\")\r\n      mois = \"Février\";\r\n    if (mois === \"March\")\r\n      mois = \"Mars\";\r\n    if (mois === \"April\")\r\n      mois = \"Avril\";\r\n    if (mois === \"May\")\r\n      mois = \"Mai\";\r\n    if (mois === \"June\")\r\n      mois = \"Juin\";\r\n    if (mois === \"July\")\r\n      mois = \"Juillet\";\r\n    if (mois === \"August\")\r\n      mois = \"Aout\";\r\n    if (mois === \"September\")\r\n      mois = \"Septembre\";\r\n    if (mois === \"October\")\r\n      mois = \"Octobre\";\r\n    if (mois === \"November\")\r\n      mois = \"Novembre\";\r\n    if (mois === \"December\")\r\n      mois = \"Décembre\";\r\n\r\n    return jour + \" \" + numero + \" \" + mois + \" \" + annee;\r\n\r\n  }\r\n\r\n  handleChangeStatusTab(event) {\r\n    firebase.database().ref('missions/' + event.target.name).update({ statut: event.target.value })\r\n  }\r\n\r\n  deuxiemebouton(nomission){\r\n    if( nomission.length > 12 ){\r\n      return <button name={nomission} onClick={() => this.onOpenModal4(nomission)}>Afficher</button>\r\n    }else{\r\n      return <button name={nomission} onClick={() => this.onOpenModal(nomission)}>&#x270f; Modifier</button>\r\n    }\r\n  }\r\n\r\n  boutonsupprimer(nomission){\r\n    if(nomission.length === 13 && nomission.charAt(12)==='1' ){\r\n      return \"\"\r\n    }else{\r\n      return <button onClick={() => this.deleteMission(nomission)}>Supprimer</button>\r\n    }\r\n  }\r\n\r\n  updateDisplay() {\r\n    let listItem = this.state.filteredmissions.map((mission, index) =>\r\n\r\n      <tr>\r\n      <th>\r\n      <input type=\"checkbox\" name={mission.nomission} value=\"checked\" onChange={this.checkselected}/>\r\n      </th>\r\n        <th>\r\n          <button name={mission.nomission} onClick={() => this.onOpenModal(mission.nomission)}>&#x270f; Modifier</button>\r\n        </th>\r\n        <th>\r\n        {this.options_mission_listestatut_color(mission)}\r\n        </th>\r\n        <th>{mission.specialite}</th>\r\n        <th>{this.extraireDateFrancais(mission.datededebut)}</th>\r\n        <th>{mission.ville}</th>\r\n        <th>{mission.type}</th>\r\n        <th>{mission.typedetablissement}</th>\r\n        <th>{mission.remuneration}</th>\r\n        <th>{this.boutonsupprimer(mission.nomission)}</th>\r\n      </tr>\r\n\r\n\r\n    );\r\n    this.setState({\r\n      display: <div class=\"table-responsive\"><table class=\"table table-striped\">\r\n        <tr>\r\n          <th scope=\"col\" ></th>\r\n          <th scope=\"col\" ></th>\r\n          <th scope=\"col\" ><UncontrolledDropdown><DropdownToggle onClick={e => this.onSort(e, 'statut')} > Statut actuel de la mission </DropdownToggle></UncontrolledDropdown></th>\r\n          <th scope=\"col\" ><UncontrolledDropdown><DropdownToggle onClick={e => this.onSort(e, 'specialite')} > Spécialité </DropdownToggle></UncontrolledDropdown></th>\r\n          <th scope=\"col\" ><UncontrolledDropdown><DropdownToggle onClick={e => this.onSort(e, 'datedefin')} > Date </DropdownToggle></UncontrolledDropdown></th>\r\n          <th scope=\"col\" ><UncontrolledDropdown><DropdownToggle onClick={e => this.onSort(e, 'ville')} > Ville </DropdownToggle></UncontrolledDropdown></th>\r\n          <th scope=\"col\" ><UncontrolledDropdown><DropdownToggle onClick={e => this.onSort(e, 'type')} > Type de mission </DropdownToggle></UncontrolledDropdown></th>\r\n          <th scope=\"col\" ><UncontrolledDropdown><DropdownToggle onClick={e => this.onSort(e, 'typedetablissement')} > Type d'E.S. </DropdownToggle></UncontrolledDropdown></th>\r\n          <th scope=\"col\" ><UncontrolledDropdown><DropdownToggle onClick={e => this.onSort(e, 'remuneration')} > Rémunération </DropdownToggle></UncontrolledDropdown></th>\r\n          <th scope=\"col\" ></th>\r\n        </tr>\r\n        {listItem}\r\n      </table></div>\r\n    });\r\n  }\r\n  optionslistestatut() {\r\n    return this.state.listestatut.map(listestatut => {\r\n      if (listestatut === \"Recherche en cours\") {\r\n        return (\r\n          <option class=\"alert-danger\">{listestatut}</option>\r\n        )\r\n      } else if (listestatut === \"Pourvu\") {\r\n        return (\r\n          <option class=\"alert-success\">{listestatut}</option >\r\n        )\r\n      }\r\n      else {\r\n        return (\r\n          <option>{listestatut}</option>\r\n        )\r\n      }\r\n    })\r\n  }\r\n  optionslistestatut_color() {\r\n    let optionslistestatut = this.optionslistestatut();\r\n    if (this.state.statut === \"Recherche en cours\") return (<select type=\"text\" class=\"form-control alert-danger\" name=\"statut\" value={this.state.statut} onChange={this.handleChange}  >\r\n      {optionslistestatut}\r\n    </select>)\r\n    else if (this.state.statut === \"Pourvu\") return (<select type=\"text\" class=\"form-control alert-success\" name=\"statut\" value={this.state.statut} onChange={this.handleChange}  >\r\n      {optionslistestatut}\r\n    </select>)\r\n    else return (<select type=\"text\" class=\"form-control\" name=\"statut\" value={this.state.statut} onChange={this.handleChange}  >\r\n      {optionslistestatut}\r\n    </select>)\r\n\r\n  }\r\n  options_mission_listestatut_color(mission) {\r\n\r\n    if (mission.statut === \"Recherche en cours\") return (<select type=\"text\" class=\"form-control alert-danger\" name={mission.nomission} value={mission.statut} onChange={this.handleChangeStatusTab} >\r\n    {this.optionslistestatut()}\r\n    </select>)\r\n    else if (mission.statut === \"Pourvu\") return (<select type=\"text\" class=\"form-control alert-success\" name={mission.nomission} value={mission.statut} onChange={this.handleChangeStatusTab} >\r\n    {this.optionslistestatut()}\r\n    </select>)\r\n    else return (<select type=\"text\" class=\"form-control\" name={mission.nomission} value={mission.statut} onChange={this.handleChangeStatusTab} >\r\n    {this.optionslistestatut()}\r\n    </select>)\r\n\r\n  }\r\n\r\n  onSort(event, sortKey) {\r\n    const sortkeys = this.state.sortkeys;\r\n\r\n    sortkeys.push(sortKey);\r\n\r\n    this.setState({ sortkeys: sortkeys })\r\n  }\r\n\r\n  checkselected(event) {\r\n\r\n      let tmpcheckedmissions = this.state.checkedmissions;\r\n      let errorcount = 0;\r\n\r\n      for (let i = 0; i < tmpcheckedmissions.length; i++) {\r\n        if (event.target.name === tmpcheckedmissions[i]){\r\n          tmpcheckedmissions[i]= \"\";\r\n          errorcount++;\r\n        }\r\n      }\r\n\r\n      if( errorcount === 0)\r\n        tmpcheckedmissions.push(event.target.name);\r\n\r\n      this.setState({ checkedmissions: tmpcheckedmissions})\r\n  }\r\n\r\n\r\n  deleteMission(todeletenomission) {\r\n    firebase.database().ref('missions/' + todeletenomission).remove()\r\n  }\r\n\r\n  dateformatreduit(date){\r\n    let mois = dateFormat(date, \"mm\").toString();\r\n    let numero = dateFormat(date, \"dd\").toString();\r\n    let annee = dateFormat(date, \"yyyy\").toString();\r\n\r\n    if(numero <10)\r\n      numero = \"0\" + numero\r\n\r\n\r\n    return numero + \"/\" + mois + \"/\" + annee\r\n\r\n  }\r\n\r\n\r\n  render(){\r\n\r\n    const { open } = this.state;\r\n    const { open2 } = this.state;\r\n    const { open3 } = this.state;\r\n    return(\r\n      <div >\r\n      <Modal open={open} onClose={this.onCloseModal} center>\r\n        <MissionPage nomission={this.state.selectednomission}/>\r\n      </Modal>\r\n      <Modal open={open2} onClose={this.onCloseModal2} center>\r\n        <PdfFormDevis checkedmissions={this.state.checkedmissions}/>\r\n      </Modal>\r\n      <Modal open={open3} onClose={this.onCloseModal3} center>\r\n        <PdfFormODM checkedmissions={this.state.checkedmissions}/>\r\n      </Modal>\r\n      <div style={{textAlign: 'center', width: '800px'}}>\r\n        <h1>Mission du {this.dateformatreduit(this.state.datededebut)} au {this.dateformatreduit(this.state.datedefin)}</h1>\r\n      </div>\r\n      <div>\r\n        <button onClick={this.onOpenModal2} class=\"btn btn-md btn-block\" id=\"addNewElement\" >Générer un devis</button>\r\n        <button onClick={this.onOpenModal3} class=\"btn btn-md btn-block\" id=\"addNewElement\" >Générer un ODM</button>\r\n      </div>\r\n      <div>\r\n      {this.state.display}\r\n      </div>\r\n      </div>\r\n    )\r\n  }\r\n\r\n}\r\n"]},"metadata":{},"sourceType":"module"}